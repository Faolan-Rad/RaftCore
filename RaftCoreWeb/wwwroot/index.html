<!DOCTYPE html>
<meta charset="utf-8">
<head>
  <title>Test</title>
  <script src="d3.v5.min.js"></script>
  <script src="initialsim.js"></script>
  <script src="heartbeats.js"></script>
  <script src="d3log.js"></script>
  <script src="main.js"></script>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div id="content">
    <div id="controls">
      <fieldset>
        <legend>Node information</legend>
        <p>
          Node selected:<br />
          <span id="selected-node-id">-</span>
        </p>
        <p>
          State:<br />
          <span id="selected-node-state">-</span>
        </p>
        <p>
          Term:<br />
          <span id="selected-node-term">-</span>
        </p>
        <!-- Change to the restart/stop button -->
        <button id="switch-node" onclick="switchNode()" disabled="true">Stop/restart</button>
        </fieldset>

      <fieldset class="rows">
      <legend>Make request</legend>
      <input type="text" id="request" placeholder="Enter request"/>
      <button class="req-button" onclick="sendRequest()">âž¡</button>
      </fieldset>
      <fieldset class="rows">
      <legend>Messages</legend>
      		<input id="send-heartbeats" type="checkbox" onchange="sendHeartbeats()" /><label for="send-heartbeats">Show heartbeats</label>
      </fieldset>
    </div>
    <div id="visualization">
      <svg width="400" height="400">
        <g class="links"></g>
        <g class="messages"></g>
        <g class="circles"></g>
        <g class="tags"></g>
      </svg>
    </div>
    <div id="log"></div>
    <div id="sm"></div>
    <div id="legend">Colours - states</div>
  </div>
  <footer>
  	<div id="errors"></div>
    <div id="messages">Click on a node to select it.</div>
    <hr />
  	<div id="info">This is a visualization of the <a href="https://raft.github.io/">Raft algorithm</a>. You can browse the code for this visualization in <a href="https://github.com/guille/raftcore">GitHub</a></div>
  </footer>
  <script type="text/javascript">
    // Register enter key on the textbox sends a user request
    document.getElementById("request").addEventListener("keyup", event => {
        if(event.key !== "Enter") return;
        sendRequest()
        event.preventDefault(); // No need to `return false;`.
    });

  </script>
</body>
</html>